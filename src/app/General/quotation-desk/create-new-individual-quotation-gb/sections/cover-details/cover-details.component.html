<q-building #bl_modal (saveEvent)="saveStuff($event)"></q-building>
<q-defense-recourse
  #dr_modal
  (saveEvent)="saveStuff($event)"
></q-defense-recourse>
<q-life-insurance #lil_modal (saveEvent)="saveStuff($event)"></q-life-insurance>
<q-motor-accessories
  #acc_modal
  (saveEvent)="saveStuff($event)"
></q-motor-accessories>
<q-motor-third-party
  #tp_modal
  (saveEvent)="saveStuff($event)"
></q-motor-third-party>
<q-ind-savings #sav_modal (saveEvent)="saveStuff($event)"></q-ind-savings>
<q-property-content
  #pc_modal
  (saveEvent)="saveStuff($event)"
></q-property-content>
<q-marine-cargo #mc_modal (saveEvent)="saveStuff($event)"></q-marine-cargo>
<q-marine-hull #mh_modal (saveEvent)="saveStuff($event)"></q-marine-hull>
<q-bond #bond_modal (saveEvent)="saveStuff($event)"></q-bond>
<q-life-risk #lir_modal (saveEvent)="saveStuff($event)"></q-life-risk>
<q-life-credit #lic_modal (saveEvent)="saveStuff($event)"></q-life-credit>
<q-endowment #end_modal (saveEvent)="saveStuff($event)"></q-endowment>
<q-life-annuity #lia_modal (saveEvent)="saveStuff($event)"></q-life-annuity>
<q-deferred-life-annuity
  #dlia_modal
  (saveEvent)="saveStuff($event)"
></q-deferred-life-annuity>

<div>
  <br />
  <div class="row mt-3 mb-4">
    <div class="col-md-auto">
      <span
        >{{ 'Product Code' | appTranslate | async }}:
        <a
          routerLink="../../../setups/product/product-code/show"
          [queryParams]="{ prodCode: product.code }"
          class="text-primary"
          >{{ product?.code }}</a
        ></span
      >
    </div>
    <div class="col-md-auto">
      <span
        >{{ 'Product Description' | appTranslate | async }}:
        <span class="text-primary">{{ product?.description }}</span></span
      >
    </div>
    <div class="col-md-auto">
      <span
        >{{ 'Quote No' | appTranslate | async }}:
        <span class="text-primary">{{ quoteNo }}</span></span
      >
    </div>
    <!-- <div class="col-sm-3">
        <div class="form-group">
          <label for="" class="form-label text-primary">Cover type</label>
          <select name="" id="" class="form-control control-bg-gray" [(ngModel)]='systemSelect'>
            <option value="motor">Motor</option>
            <option value="houseHolder">Householder</option>
            <option value="travel">Travel</option>
          </select>
        </div>
      </div> -->
  </div>
  <form [formGroup]="coverDetailsForm">
    <div>
      <div class="row">
        <div class="col-sm-2 col-lg-1">
          <div class="form-group">
            <label class="form-label text-primary">{{
              'Asset ID' | appTranslate | async
            }}</label>
            <input
              formControlName="assetNo"
              type="text"
              class="form-control control-bg-gray border border-success"
            />
          </div>
        </div>
        <div class="col-sm-1">
          <div class="form-group">
            <label class="form-label text-primary">&nbsp;</label>
            <app-button
              buttonType="searchCustomGB"
              (click)="findAsset()"
            ></app-button>
          </div>
        </div>
        <div class="col-sm-1">
          <div class="form-group">
            <label class="form-label text-primary">&nbsp;</label>
            <app-button
              buttonType="addCustomGB"
              (click)="createAsset()"
            ></app-button>
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label class="form-label text-primary">{{
              'Redg No' | appTranslate | async
            }}</label>
            <input
              formControlName="redgNo"
              readonly
              type="text"
              class="form-control control-bg-gray"
              [value]="redgNoFromCheck"
            />
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label class="form-label text-primary">Purchase Value</label>
            <input
              formControlName="purchaseValue"
              class="form-control control-bg-gray"
            />
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label class="form-label text-primary">{{
              'Market Value by Client' | appTranslate | async
            }}</label>
            <input
              formControlName="marketValueByClient"
              class="form-control control-bg-gray"
            />
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label class="form-label text-primary">{{
              'Adjusted Market Value' | appTranslate | async
            }}</label>
            <input
              formControlName="marketValueBySystem"
              class="form-control control-bg-gray"
            />
          </div>
        </div>
        <div class="col-sm-2">
          <div class="form-group">
            <label class="form-label text-primary">{{
              'Pay As You Go' | appTranslate | async
            }}</label>
            <input
              formControlName="payAsYouGo"
              type="checkbox"
              class="form-control control-bg-gray"
            />
          </div>
        </div>
      </div>

      <hr />
      <div class="row g-2">
        <div class="col-sm-4">
          <label for="" class="text-primary form-label">{{
            'Select Cover' | appTranslate | async
          }}</label>
        </div>
        <div class="col-sm-2">
          <label for="" class="text-primary form-label">{{
            'Assured' | appTranslate | async
          }}</label>
        </div>
        <div class="col-sm-2">
          <label for="" class="text-primary form-label">{{
            'Assured Name' | appTranslate | async
          }}</label>
        </div>
        <div class="col-sm-1">
          <label for="" class="text-primary form-label">&nbsp;</label>
        </div>
        <div class="col-sm-2">
          <label for="" class="text-primary form-label">{{
            'Assured Relationship to Owner' | appTranslate | async
          }}</label>
        </div>
        <div class="col-sm-1">
          <label for="" class="text-primary form-label text-center w-100">{{
            'Details' | appTranslate | async
          }}</label>
        </div>
      </div>
      <div class="text-center" *ngIf="coverScreens && coverScreens.length == 0">
        {{ 'No Covers to display' | appTranslate | async }}
      </div>
      <div *ngIf="coverScreens && coverScreens.length > 0">
        <div
          formArrayName="covers"
          *ngFor="
            let cover of coverDetailsForm.get('covers')['controls'];
            let i = index
          "
        >
          <div class="row" formGroupName="{{ i }}">
            <div class="row g-2 mb-2">
              <div class="col-sm-4">
                <div class="form-group">
                  <div class="row d-flex align-items-center">
                    <div *ngIf="isDependent[i]" class="col-sm-1"></div>
                    <div class="col-sm-2">
                      <input
                        readonly
                        [checked]="selected[i]"
                        class="form-control control-bg-gray"
                        type="checkbox"
                        [disabled]="coverDisabled[i]"
                        (change)="setSelected(i)"
                      />
                    </div>
                    <div class="col">
                      <label for="" class="text-black-50 form-label small1">
                        <a
                          routerLink="../../../setups/product/product-cover-code/show"
                          [queryParams]="{
                            code:
                              newCoverScreens[i].info.coverCode ||
                              newCoverScreens[i].info.riderCoverCode
                          }"
                          class="text-primary"
                          >{{
                            newCoverScreens[i].info.coverCode ||
                              newCoverScreens[i].info.riderCoverCode
                          }}
                          - {{ newCoverScreens[i].info.description }}</a
                        >
                      </label>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group">
                  <input
                    #imput
                    formControlName="assuredNo"
                    type="text"
                    class="form-control control-bg-gray"
                    (change)="findAssured(i, imput.value)"
                  />
                </div>
              </div>
              <div class="col-sm-2">
                <div class="form-group">
                  <input
                    formControlName="assuredName"
                    readonly
                    [value]="client[i]?.fullName"
                    type="text"
                    class="form-control control-bg-gray"
                  />
                </div>
              </div>
              <div class="col-sm-1">
                <app-button
                  [buttonType]="'createCustom2GB'"
                  routerLink="/general/client-desk/create/individual"
                  [text]="'Assured'"
                ></app-button>
              </div>
              <div class="col-sm-2">
                <div class="form-group">
                  <input
                    formControlName="assuredRel"
                    readonly
                    [value]="assuredRelToOwner$[i]"
                    type="text"
                    class="form-control control-bg-gray"
                  />
                </div>
              </div>
              <div class="col-sm-1">
                <input
                  [disabled]="!selected[i]"
                  class="form-control control-bg-gray mx-auto mt-1"
                  id="checkbox_{{ i }}"
                  (click)="showCoverScreen($event, newCoverScreens[i], i)"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  title="
                {{ modal[i] }}
              "
                  type="checkbox"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="row g-2 justify-content-end mt-3">
        <div class="col-sm-3">
          <app-button
            [buttonType]="'addCustomGB'"
            data-bs-toggle="modal"
            data-bs-target="#addAnotherAsset"
            [text]="'Add another Asset'"
          ></app-button>
        </div>
      </div>
    </div>
  </form>
</div>
